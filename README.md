# Soroban Groth16 Verifier

This project implements a **Groth16 zk-SNARK verifier** as a Soroban smart contract, enabling on-chain verification of zero-knowledge proofs within the Stellar network.

## üöÄ Features

- Verifies Groth16 zk-SNARK proofs on-chain.
- Compatible with proofs generated by [Circom](https://docs.circom.io/), [SnarkJS](https://github.com/iden3/snarkjs), [Arkwork](https://github.com/arkworks-rs).
- Utilizes the [stellar bls12-381 host functions](https://github.com/stellar/stellar-protocol/blob/master/core/cap-0059.md) for proof verification.
- Designed for deployment on the Stellar Soroban platform.

## üì¶ Prerequisites

- Rust toolchain with `wasm32-unknown-unknown` target installed.
- [Soroban CLI](https://github.com/stellar/soroban-tools) for building and deploying contracts.
- [Circom](https://docs.circom.io/getting-started/installation/), [SnarkJS](https://github.com/iden3/snarkjs) or [Arkwork](https://github.com/arkworks-rs) for generating proofs.

## üõ†Ô∏è Building the Contract

1. Clone the repository:

   ```bash
   git clone https://github.com/veil-protocol-privacy/groth16-soroban.git
   cd groth16-soroban
   ```

2. Build the contract using the Soroban CLI:
   ```bash
   soroban contract build
   ```

## üì§ Deploying the Contract

1. Deploy the contract to the Soroban network:

   ```bash
   soroban contract deploy --wasm target/wasm32-unknown-unknown/release/groth16-soroban.wasm
   ```

2. Note the contract ID returned after deployment for future interactions.

## üîç Verifying a Proof

1. Generate a proof using Circom and SnarkJS:

   ```bash
   circom circuit.circom --r1cs --wasm --sym
   snarkjs groth16 setup circuit.r1cs powersOfTau28_hez_final_10.ptau circuit_0000.zkey
   snarkjs groth16 prove circuit_0000.zkey witness.wtns proof.json public.json
   ```

2. Convert the proof and public inputs to a format compatible with the Soroban contract.

3. Invoke the contract's verification function:

   ```bash
   soroban contract invoke \
     --id <CONTRACT_ID> \
     --fn verify_proof \
     --arg <PROOF_ARGUMENTS>
   ```

   Replace `<CONTRACT_ID>` with your deployed contract ID and `<PROOF_ARGUMENTS>` with the serialized proof and public inputs.

## üß™ Testing

Run the test suite to ensure the verifier functions correctly:

```bash
cargo test
```

## üìö Resources

- [Circom Documentation](https://docs.circom.io/)
- [SnarkJS Documentation](https://github.com/iden3/snarkjs)
- [Arkwork](https://github.com/arkworks-rs)
- [Stellar Soroban Documentation](https://soroban.stellar.org/docs)

## üìù License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

---

For a practical example and further reference, you can explore the [stellar/soroban-examples](https://github.com/stellar/soroban-examples) repository, which includes a proof-of-concept Groth16 verifier implementation.

---
